{% extends 'base.html.twig' %}

{% block title %}Products{% endblock %}

{% block body %}

    <style>
        table, tr, th, td {
            border: 1px solid rgba(210, 176, 176, 0.72)
        }

        th, td {
            text-align: center;
        }
    </style>

    <div class="mt-3 w-100 d-flex flex-row justify-content-center">
        <button id="create-new-product-button" class="btn btn-success">Create new product</button>
    </div>

    <div id="existing-products" class="mt-3">
        <table class="m-auto w-75">
            <tr class="w-100">
                <th class="w-25">ID</th>
                <th class="w-25">Product Name</th>
                <th class="w-25">Price </th>
                <th class="w-25">Settings</th>
            </tr>
            {% for product in products %}
                <tr>
                    <td>{{ product.id }}</td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.price }}â‚¬</td>
                    <td class="d-flex flex-row justify-content-center border-0">
                        <button type="button" class="btn btn-danger delete-product" style="display: flex; flex-direction: column; align-items: center;" data-id="{{ product.id }}">x</button>
                        <a href="{{ path('edit_product',{'id':product.id}) }}" type="button" class="btn btn-dark ml-2 edit-product" style="display: flex; flex-direction: column; align-items: center;"> Edit</a>
                    </td>
                </tr>
            {%  endfor %}
        </table>
    </div>

    <div id="add-product" style="border: 1px solid #868686; width:300px;position: absolute; top:23%;left:18%; display: none; background: #f1ecec; border-radius: 4px; padding: 1%;">
        {{ form_start(productForm) }}
            {{ form_row(productForm.name,{'label':'Name of product'}) }}
            {{ form_row(productForm.price) }}
            {{ form_row(productForm._token) }}
        <div class="d-flex flex-row justify-content-center">
            {{ form_row(productForm.submit) }}
            <button type="button" class="btn btn-danger h-25" id="cancel-new-product-button">Cancel</button>
        </div>
        {{ form_end(productForm,{'render_rest':false}) }}
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            $("#create-new-product-button").on("click",function ()
            {
                $(".container").children().not("#add-product").css({
                    "opacity": "0.2",
                    "pointer-events": "none",
                });
                $("#add-product").css({
                    "display": "block",
                    "z-index": "100",
                });
                $("#product_form_price").val("");
                $("#product_form_name").val("");
            });
            
            $("#product_form").css({
                "margin-top":"20px",
               "display":"flex",
               "flex-direction":"column",
                "align-items":"center"
            });
            
            $("#cancel-new-product-button").on("click",function () 
            {
                $(".container").children().not("#add-product").css({
                    "opacity": "1",
                    "pointer-events": "auto",
                });
                $("#add-product").css({
                    "display": "none",
                });
            });
            
            
        });
    </script>
{% endblock %}

